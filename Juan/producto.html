<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Producto - ChemiStore</title>
    <link rel="StyleSheet" href="estilos.css" type="text/css" media="screen" />
    <script src="code.js"></script>
    <script
      src="https://kit.fontawesome.com/b20a70b737.js"
      crossorigin="anonymous"
    ></script>
  </head>

  <body>
    <div class="btn-arriba">
      <a href="index.html">
        <i class="fa-solid fa-arrow-up"></i>
      </a>
    </div>

    <header>
      <img src="/imagenes/logo-sf1.png" alt="logo sin fondo en el header" />
      <h2>Categorías de nuestros productos</h2>

      <div class="btn-carrito">
        <a href="carrito.html">
          <i class="fa-solid fa-cart-shopping"></i>
        </a>
      </div>

      <div class="categorias">
        <nav class="navegacion">
          <div class="categoria-item">
            <a href="index.html?category=1" class="categoria-texto" data-category="1">Retro</a>
            <div class="categoria-imagen">
              <img src="/imagenes/retro.png" alt="Camiseta retro" />
            </div>
          </div>

            <div class="categoria-item">
            <a href="index.html?category=2" class="categoria-texto" data-category="2">Actualidad</a>
            <div class="categoria-imagen">
              <img src="/imagenes/actualidad.png" alt="Camiseta actualidad" />
            </div>
          </div>

            <div class="categoria-item">
            <a href="index.html?category=3" class="categoria-texto" data-category="3">Niños</a>
            <div class="categoria-imagen">
              <img src="/imagenes/niño1.png" alt="Camiseta niño" />
            </div>
          </div>

            <div class="categoria-item">
            <a href="index.html?category=4" class="categoria-texto" data-category="4">Hombre</a>
            <div class="categoria-imagen">
              <img src="/imagenes/hombre1.png" alt="Camiseta hombre" />
            </div>
          </div>

            <div class="categoria-item">
            <a href="index.html?category=5" class="categoria-texto" data-category="5">Mujer</a>
            <div class="categoria-imagen">
              <img src="/imagenes/mujer.png" alt="Camiseta mujer" />
            </div>
          </div>
        </nav>
      </div>
    </header>

    <main id="producto-detalle">
      <!-- Product details will be loaded here -->
    </main>

    <footer>
      <div class="contenedor-img1">
        <img src="/imagenes/logo-sf1.png" alt="logo sin fondo en footer" />
      </div>

      <div class="footer-content">
        <div class="footer-column">
          <h3>Contacto</h3>
          <ul>
            <li>
              <strong>E-mail:</strong>
              <a href="https://accounts.google.com/">chemistore.sv@gmail.com</a>
            </li>
            <li><strong>Teléfono:</strong> +503 1234-5678</li>
            <li>
              <strong>Dirección:</strong> Avenida Cuscatlán y 2° Calle Poniente,
              local #34, San Salvador, El Salvador
            </li>
          </ul>
        </div>

        <div class="footer-column">
          <h3>Enlaces</h3>
          <ul>
            <li><a href="index.html">Inicio</a></li>
            <li><a href="quiensomos.html">Sobre Nosotros</a></li>
            <li><a href="carrito.html">Carrito</a></li>
            <li><a href="opinion.html">Danos tu opinión</a></li>
          </ul>
        </div>

        <div class="footer-column">
          <h3>Siguenos</h3>
          <ul class="footer-icons">
            <li>
              <a href="https://facebook.com" target="_blank"
                ><i class="fab fa-facebook"></i
              ></a>
            </li>
            <li>
              <a href="https://instagram.com" target="_blank">
                <i class="fab fa-instagram"></i
              ></a>
            </li>
            <li>
              <a href="https://www.tiktok.com/signup" target="_blank">
                <i class="fab fa-tiktok"></i
              ></a>
            </li>
            <li>
              <a href="https://x.com" target="_blank">
                <i class="fab fa-twitter"></i
              ></a>
            </li>
          </ul>
        </div>
      </div>
      <p>Desarrollado por: Urrutia Najarro, Juan José</p>
      <p>Carnet: UN22001</p>
    </footer>

    <script>
      // Load product details
      document.addEventListener('DOMContentLoaded', function() {
        const urlParams = new URLSearchParams(window.location.search);
        const productId = parseInt(urlParams.get('id'));

        if (productId) {
          fetch('chemistoreapi.json')
            .then(response => response.json())
            .then(data => {
              const producto = data.camisetas.find(p => p.id === productId);
              const categoria = data.categorias.find(cat => cat.id === producto.categoriaId)?.nombre || 'Desconocida';
              const tallasDisponibles = producto.talla.map(id => data.tallas.find(t => t.id === id)).filter(t => t);

              if (producto) {
                const main = document.getElementById('producto-detalle');
                main.innerHTML = `
                  <div class="producto-container">
                    <div class="producto-imagen">
                      <img src="${producto.img}" alt="${producto.nombre}">
                    </div>
                    <div class="producto-info">
                      <h3>${producto.nombre}</h3>
                      <p><strong>Categoría:</strong> ${categoria}</p>
                      <p>${producto.descripcion}</p>
                      <p class="precio">$${producto.precio}</p>
                      <label for="talla-select">Talla:</label>
                      <select id="talla-select">
                        ${tallasDisponibles.map(t => `<option value="${t.id}">${t.nombre}</option>`).join('')}
                      </select>
                      <label for="cantidad-input">Cantidad:</label>
                      <input type="number" id="cantidad-input" min="1" value="1">
                      <button id="agregar-carrito">Agregar al Carrito</button>
                    </div>
                  </div>
                `;

                // Add to cart functionality
                document.getElementById('agregar-carrito').addEventListener('click', function() {
                  const tallaId = parseInt(document.getElementById('talla-select').value);
                  const cantidad = parseInt(document.getElementById('cantidad-input').value);
                  const tallaNombre = data.tallas.find(t => t.id === tallaId).nombre;

                  let cart = JSON.parse(localStorage.getItem('cart')) || [];
                  const existingItem = cart.find(item => item.id === productId && item.tallaId === tallaId);

                  if (existingItem) {
                    existingItem.cantidad += cantidad;
                  } else {
                    cart.push({
                      id: productId,
                      nombre: producto.nombre,
                      img: producto.img,
                      precio: producto.precio,
                      tallaId: tallaId,
                      tallaNombre: tallaNombre,
                      cantidad: cantidad
                    });
                  }

                  localStorage.setItem('cart', JSON.stringify(cart));
                  alert('Producto agregado al carrito');
                });
              } else {
                document.getElementById('producto-detalle').innerHTML = '<p>Producto no encontrado.</p>';
              }
            })
            .catch(error => console.error('Error fetching data:', error));
        } else {
          document.getElementById('producto-detalle').innerHTML = '<p>ID de producto no especificado.</p>';
        }
      });
    </script>
  </body>
</html>
